var we=(n,o)=>()=>(o||n((o={exports:{}}).exports,o),o.exports);import{d as he,r as I,w as Z,o as j,c as $,a as b,n as T,t as O,b as ve,e as pe,T as be,f as Fe,v as xe,F as ke,p as Se,g as Be,_ as ge,h as Re,S as Ie,i as Ae}from"./_plugin-vue_export-helper-D83LDPrN.js";var Bt=we(te=>{var H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Pe(n){if(n.__esModule)return n;var o=n.default;if(typeof o=="function"){var e=function l(){return this instanceof l?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};e.prototype=o.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(l){var y=Object.getOwnPropertyDescriptor(n,l);Object.defineProperty(e,l,y.get?y:{enumerable:!0,get:function(){return n[l]}})}),e}var ee={exports:{}},Q,se;function Oe(){if(se)return Q;se=1;var n=1e3,o=n*60,e=o*60,l=e*24,y=l*7,f=l*365.25;Q=function(t,r){r=r||{};var u=typeof t;if(u==="string"&&t.length>0)return w(t);if(u==="number"&&isFinite(t))return r.long?p(t):_(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function w(t){if(t=String(t),!(t.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(r){var u=parseFloat(r[1]),d=(r[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return u*f;case"weeks":case"week":case"w":return u*y;case"days":case"day":case"d":return u*l;case"hours":case"hour":case"hrs":case"hr":case"h":return u*e;case"minutes":case"minute":case"mins":case"min":case"m":return u*o;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function _(t){var r=Math.abs(t);return r>=l?Math.round(t/l)+"d":r>=e?Math.round(t/e)+"h":r>=o?Math.round(t/o)+"m":r>=n?Math.round(t/n)+"s":t+"ms"}function p(t){var r=Math.abs(t);return r>=l?a(t,r,l,"day"):r>=e?a(t,r,e,"hour"):r>=o?a(t,r,o,"minute"):r>=n?a(t,r,n,"second"):t+" ms"}function a(t,r,u,d){var m=r>=u*1.5;return Math.round(t/u)+" "+d+(m?"s":"")}return Q}function Me(n){e.debug=e,e.default=e,e.coerce=p,e.disable=f,e.enable=y,e.enabled=w,e.humanize=Oe(),e.destroy=a,Object.keys(n).forEach(t=>{e[t]=n[t]}),e.names=[],e.skips=[],e.formatters={};function o(t){let r=0;for(let u=0;u<t.length;u++)r=(r<<5)-r+t.charCodeAt(u),r|=0;return e.colors[Math.abs(r)%e.colors.length]}e.selectColor=o;function e(t){let r,u=null,d,m;function h(...c){if(!h.enabled)return;const C=h,s=Number(new Date),i=s-(r||s);C.diff=i,C.prev=r,C.curr=s,r=s,c[0]=e.coerce(c[0]),typeof c[0]!="string"&&c.unshift("%O");let v=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,(F,k)=>{if(F==="%%")return"%";v++;const S=e.formatters[k];if(typeof S=="function"){const B=c[v];F=S.call(C,B),c.splice(v,1),v--}return F}),e.formatArgs.call(C,c),(C.log||e.log).apply(C,c)}return h.namespace=t,h.useColors=e.useColors(),h.color=e.selectColor(t),h.extend=l,h.destroy=e.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(d!==e.namespaces&&(d=e.namespaces,m=e.enabled(t)),m),set:c=>{u=c}}),typeof e.init=="function"&&e.init(h),h}function l(t,r){const u=e(this.namespace+(typeof r>"u"?":":r)+t);return u.log=this.log,u}function y(t){e.save(t),e.namespaces=t,e.names=[],e.skips=[];let r;const u=(typeof t=="string"?t:"").split(/[\s,]+/),d=u.length;for(r=0;r<d;r++)u[r]&&(t=u[r].replace(/\*/g,".*?"),t[0]==="-"?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function f(){const t=[...e.names.map(_),...e.skips.map(_).map(r=>"-"+r)].join(",");return e.enable(""),t}function w(t){if(t[t.length-1]==="*")return!0;let r,u;for(r=0,u=e.skips.length;r<u;r++)if(e.skips[r].test(t))return!1;for(r=0,u=e.names.length;r<u;r++)if(e.names[r].test(t))return!0;return!1}function _(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function p(t){return t instanceof Error?t.stack||t.message:t}function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var Ee=Me;(function(n,o){var e={};o.formatArgs=y,o.save=f,o.load=w,o.useColors=l,o.storage=_(),o.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function l(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function y(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;a.splice(1,0,t,"color: inherit");let r=0,u=0;a[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(r++,d==="%c"&&(u=r))}),a.splice(u,0,t)}o.log=console.debug||console.log||(()=>{});function f(a){try{a?o.storage.setItem("debug",a):o.storage.removeItem("debug")}catch{}}function w(){let a;try{a=o.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=e.DEBUG),a}function _(){try{return localStorage}catch{}}n.exports=Ee(o);const{formatters:p}=n.exports;p.j=function(a){try{return JSON.stringify(a)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})(ee,ee.exports);var Le=ee.exports;const Ne=J(Le);var me={exports:{}};(function(n){var o=Object.prototype.hasOwnProperty,e="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(e=!1));function y(p,a,t){this.fn=p,this.context=a,this.once=t||!1}function f(p,a,t,r,u){if(typeof t!="function")throw new TypeError("The listener must be a function");var d=new y(t,r||p,u),m=e?e+a:a;return p._events[m]?p._events[m].fn?p._events[m]=[p._events[m],d]:p._events[m].push(d):(p._events[m]=d,p._eventsCount++),p}function w(p,a){--p._eventsCount===0?p._events=new l:delete p._events[a]}function _(){this._events=new l,this._eventsCount=0}_.prototype.eventNames=function(){var a=[],t,r;if(this._eventsCount===0)return a;for(r in t=this._events)o.call(t,r)&&a.push(e?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(t)):a},_.prototype.listeners=function(a){var t=e?e+a:a,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var u=0,d=r.length,m=new Array(d);u<d;u++)m[u]=r[u].fn;return m},_.prototype.listenerCount=function(a){var t=e?e+a:a,r=this._events[t];return r?r.fn?1:r.length:0},_.prototype.emit=function(a,t,r,u,d,m){var h=e?e+a:a;if(!this._events[h])return!1;var c=this._events[h],C=arguments.length,s,i;if(c.fn){switch(c.once&&this.removeListener(a,c.fn,void 0,!0),C){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,u),!0;case 5:return c.fn.call(c.context,t,r,u,d),!0;case 6:return c.fn.call(c.context,t,r,u,d,m),!0}for(i=1,s=new Array(C-1);i<C;i++)s[i-1]=arguments[i];c.fn.apply(c.context,s)}else{var v=c.length,g;for(i=0;i<v;i++)switch(c[i].once&&this.removeListener(a,c[i].fn,void 0,!0),C){case 1:c[i].fn.call(c[i].context);break;case 2:c[i].fn.call(c[i].context,t);break;case 3:c[i].fn.call(c[i].context,t,r);break;case 4:c[i].fn.call(c[i].context,t,r,u);break;default:if(!s)for(g=1,s=new Array(C-1);g<C;g++)s[g-1]=arguments[g];c[i].fn.apply(c[i].context,s)}}return!0},_.prototype.on=function(a,t,r){return f(this,a,t,r,!1)},_.prototype.once=function(a,t,r){return f(this,a,t,r,!0)},_.prototype.removeListener=function(a,t,r,u){var d=e?e+a:a;if(!this._events[d])return this;if(!t)return w(this,d),this;var m=this._events[d];if(m.fn)m.fn===t&&(!u||m.once)&&(!r||m.context===r)&&w(this,d);else{for(var h=0,c=[],C=m.length;h<C;h++)(m[h].fn!==t||u&&!m[h].once||r&&m[h].context!==r)&&c.push(m[h]);c.length?this._events[d]=c.length===1?c[0]:c:w(this,d)}return this},_.prototype.removeAllListeners=function(a){var t;return a?(t=e?e+a:a,this._events[t]&&w(this,t)):(this._events=new l,this._eventsCount=0),this},_.prototype.off=_.prototype.removeListener,_.prototype.addListener=_.prototype.on,_.prefixed=e,_.EventEmitter=_,n.exports=_})(me);var Te=me.exports;const oe=J(Te);var z=null;typeof WebSocket<"u"?z=WebSocket:typeof MozWebSocket<"u"?z=MozWebSocket:typeof global<"u"?z=global.WebSocket||global.MozWebSocket:typeof window<"u"?z=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(z=self.WebSocket||self.MozWebSocket);const ie=z;var ye={exports:{}};function je(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var X={exports:{}};const De=new Proxy({},{get(n,o){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${o}" in client code.  See https://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),$e=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"})),ze=Pe($e);var ae;function _e(){return ae||(ae=1,function(n,o){(function(e,l){n.exports=l()})(H,function(){var e=e||function(l,y){var f;if(typeof window<"u"&&window.crypto&&(f=window.crypto),typeof self<"u"&&self.crypto&&(f=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(f=globalThis.crypto),!f&&typeof window<"u"&&window.msCrypto&&(f=window.msCrypto),!f&&typeof H<"u"&&H.crypto&&(f=H.crypto),!f&&typeof je=="function")try{f=ze}catch{}var w=function(){if(f){if(typeof f.getRandomValues=="function")try{return f.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof f.randomBytes=="function")try{return f.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},_=Object.create||function(){function s(){}return function(i){var v;return s.prototype=i,v=new s,s.prototype=null,v}}(),p={},a=p.lib={},t=a.Base=function(){return{extend:function(s){var i=_(this);return s&&i.mixIn(s),(!i.hasOwnProperty("init")||this.init===i.init)&&(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var s=this.extend();return s.init.apply(s,arguments),s},init:function(){},mixIn:function(s){for(var i in s)s.hasOwnProperty(i)&&(this[i]=s[i]);s.hasOwnProperty("toString")&&(this.toString=s.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),r=a.WordArray=t.extend({init:function(s,i){s=this.words=s||[],i!=y?this.sigBytes=i:this.sigBytes=s.length*4},toString:function(s){return(s||d).stringify(this)},concat:function(s){var i=this.words,v=s.words,g=this.sigBytes,F=s.sigBytes;if(this.clamp(),g%4)for(var k=0;k<F;k++){var S=v[k>>>2]>>>24-k%4*8&255;i[g+k>>>2]|=S<<24-(g+k)%4*8}else for(var B=0;B<F;B+=4)i[g+B>>>2]=v[B>>>2];return this.sigBytes+=F,this},clamp:function(){var s=this.words,i=this.sigBytes;s[i>>>2]&=4294967295<<32-i%4*8,s.length=l.ceil(i/4)},clone:function(){var s=t.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var i=[],v=0;v<s;v+=4)i.push(w());return new r.init(i,s)}}),u=p.enc={},d=u.Hex={stringify:function(s){for(var i=s.words,v=s.sigBytes,g=[],F=0;F<v;F++){var k=i[F>>>2]>>>24-F%4*8&255;g.push((k>>>4).toString(16)),g.push((k&15).toString(16))}return g.join("")},parse:function(s){for(var i=s.length,v=[],g=0;g<i;g+=2)v[g>>>3]|=parseInt(s.substr(g,2),16)<<24-g%8*4;return new r.init(v,i/2)}},m=u.Latin1={stringify:function(s){for(var i=s.words,v=s.sigBytes,g=[],F=0;F<v;F++){var k=i[F>>>2]>>>24-F%4*8&255;g.push(String.fromCharCode(k))}return g.join("")},parse:function(s){for(var i=s.length,v=[],g=0;g<i;g++)v[g>>>2]|=(s.charCodeAt(g)&255)<<24-g%4*8;return new r.init(v,i)}},h=u.Utf8={stringify:function(s){try{return decodeURIComponent(escape(m.stringify(s)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(s){return m.parse(unescape(encodeURIComponent(s)))}},c=a.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(s){typeof s=="string"&&(s=h.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var i,v=this._data,g=v.words,F=v.sigBytes,k=this.blockSize,S=k*4,B=F/S;s?B=l.ceil(B):B=l.max((B|0)-this._minBufferSize,0);var M=B*k,P=l.min(M*4,F);if(M){for(var E=0;E<M;E+=k)this._doProcessBlock(g,E);i=g.splice(0,M),v.sigBytes-=P}return new r.init(i,P)},clone:function(){var s=t.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0});a.Hasher=c.extend({cfg:t.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){s&&this._append(s);var i=this._doFinalize();return i},blockSize:16,_createHelper:function(s){return function(i,v){return new s.init(v).finalize(i)}},_createHmacHelper:function(s){return function(i,v){return new C.HMAC.init(s,v).finalize(i)}}});var C=p.algo={};return p}(Math);return e})}(X)),X.exports}(function(n,o){(function(e,l){n.exports=l(_e())})(H,function(e){return function(l){var y=e,f=y.lib,w=f.WordArray,_=f.Hasher,p=y.algo,a=[],t=[];(function(){function d(C){for(var s=l.sqrt(C),i=2;i<=s;i++)if(!(C%i))return!1;return!0}function m(C){return(C-(C|0))*4294967296|0}for(var h=2,c=0;c<64;)d(h)&&(c<8&&(a[c]=m(l.pow(h,1/2))),t[c]=m(l.pow(h,1/3)),c++),h++})();var r=[],u=p.SHA256=_.extend({_doReset:function(){this._hash=new w.init(a.slice(0))},_doProcessBlock:function(d,m){for(var h=this._hash.words,c=h[0],C=h[1],s=h[2],i=h[3],v=h[4],g=h[5],F=h[6],k=h[7],S=0;S<64;S++){if(S<16)r[S]=d[m+S]|0;else{var B=r[S-15],M=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,P=r[S-2],E=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;r[S]=M+r[S-7]+E+r[S-16]}var K=v&g^~v&F,Y=c&C^c&s^C&s,D=(c<<30|c>>>2)^(c<<19|c>>>13)^(c<<10|c>>>22),L=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),x=k+L+K+t[S]+r[S],R=D+Y;k=F,F=g,g=v,v=i+x|0,i=s,s=C,C=c,c=x+R|0}h[0]=h[0]+c|0,h[1]=h[1]+C|0,h[2]=h[2]+s|0,h[3]=h[3]+i|0,h[4]=h[4]+v|0,h[5]=h[5]+g|0,h[6]=h[6]+F|0,h[7]=h[7]+k|0},_doFinalize:function(){var d=this._data,m=d.words,h=this._nDataBytes*8,c=d.sigBytes*8;return m[c>>>5]|=128<<24-c%32,m[(c+64>>>9<<4)+14]=l.floor(h/4294967296),m[(c+64>>>9<<4)+15]=h,d.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var d=_.clone.call(this);return d._hash=this._hash.clone(),d}});y.SHA256=_._createHelper(u),y.HmacSHA256=_._createHmacHelper(u)}(Math),e.SHA256})})(ye);var He=ye.exports;const ce=J(He);var Ce={exports:{}};(function(n,o){(function(e,l){n.exports=l(_e())})(H,function(e){return function(){var l=e,y=l.lib,f=y.WordArray,w=l.enc;w.Base64={stringify:function(p){var a=p.words,t=p.sigBytes,r=this._map;p.clamp();for(var u=[],d=0;d<t;d+=3)for(var m=a[d>>>2]>>>24-d%4*8&255,h=a[d+1>>>2]>>>24-(d+1)%4*8&255,c=a[d+2>>>2]>>>24-(d+2)%4*8&255,C=m<<16|h<<8|c,s=0;s<4&&d+s*.75<t;s++)u.push(r.charAt(C>>>6*(3-s)&63));var i=r.charAt(64);if(i)for(;u.length%4;)u.push(i);return u.join("")},parse:function(p){var a=p.length,t=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var u=0;u<t.length;u++)r[t.charCodeAt(u)]=u}var d=t.charAt(64);if(d){var m=p.indexOf(d);m!==-1&&(a=m)}return _(p,a,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function _(p,a,t){for(var r=[],u=0,d=0;d<a;d++)if(d%4){var m=t[p.charCodeAt(d-1)]<<d%4*2,h=t[p.charCodeAt(d)]>>>6-d%4*2,c=m|h;r[u>>>2]|=c<<24-u%4*8,u++}return f.create(r,u)}}(),e.enc.Base64})})(Ce);var qe=Ce.exports;const le=J(qe);function W(){return W=Object.assign?Object.assign.bind():function(n){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(n[l]=e[l])}return n},W.apply(this,arguments)}function Ve(n,o){if(n==null)return{};var e={},l=Object.keys(n),y,f;for(f=0;f<l.length;f++)y=l[f],!(o.indexOf(y)>=0)&&(e[y]=n[y]);return e}var A;(function(n){n[n.Hello=0]="Hello",n[n.Identify=1]="Identify",n[n.Identified=2]="Identified",n[n.Reidentify=3]="Reidentify",n[n.Event=5]="Event",n[n.Request=6]="Request",n[n.RequestResponse=7]="RequestResponse",n[n.RequestBatch=8]="RequestBatch",n[n.RequestBatchResponse=9]="RequestBatchResponse"})(A||(A={}));var ue;(function(n){n[n.None=0]="None",n[n.General=1]="General",n[n.Config=2]="Config",n[n.Scenes=4]="Scenes",n[n.Inputs=8]="Inputs",n[n.Transitions=16]="Transitions",n[n.Filters=32]="Filters",n[n.Outputs=64]="Outputs",n[n.SceneItems=128]="SceneItems",n[n.MediaInputs=256]="MediaInputs",n[n.Vendors=512]="Vendors",n[n.Ui=1024]="Ui",n[n.All=2047]="All",n[n.InputVolumeMeters=65536]="InputVolumeMeters",n[n.InputActiveStateChanged=131072]="InputActiveStateChanged",n[n.InputShowStateChanged=262144]="InputShowStateChanged",n[n.SceneItemTransformChanged=524288]="SceneItemTransformChanged"})(ue||(ue={}));var fe;(function(n){n[n.None=-1]="None",n[n.SerialRealtime=0]="SerialRealtime",n[n.SerialFrame=1]="SerialFrame",n[n.Parallel=2]="Parallel"})(fe||(fe={}));function Ue(n,o,e){const l=le.stringify(ce(e+n));return le.stringify(ce(l+o))}const We=["authentication","rpcVersion"],V=Ne("obs-websocket-js");class U extends Error{constructor(o,e){super(e),this.code=void 0,this.code=o}}class q extends oe{constructor(...o){super(...o),this._identified=!1,this.internalListeners=new oe,this.socket=void 0}static generateMessageId(){return String(q.requestCounter++)}get identified(){return this._identified}async connect(o="ws://127.0.0.1:4455",e,l={}){var y=this;this.socket&&await this.disconnect();try{const f=this.internalEventPromise("ConnectionClosed"),w=this.internalEventPromise("ConnectionError");return await Promise.race([async function(){const _=await y.createConnection(o);return y.emit("Hello",_),y.identify(_,e,l)}(),new Promise((_,p)=>{w.then(a=>{a.message&&p(a)}),f.then(a=>{p(a)})})])}catch(f){throw await this.disconnect(),f}}async disconnect(){if(!this.socket||this.socket.readyState===ie.CLOSED)return;const o=this.internalEventPromise("ConnectionClosed");this.socket.close(),await o}async reidentify(o){const e=this.internalEventPromise(`op:${A.Identified}`);return await this.message(A.Reidentify,o),e}async call(o,e){const l=q.generateMessageId(),y=this.internalEventPromise(`res:${l}`);await this.message(A.Request,{requestId:l,requestType:o,requestData:e});const{requestStatus:f,responseData:w}=await y;if(!f.result)throw new U(f.code,f.comment);return w}async callBatch(o,e={}){const l=q.generateMessageId(),y=this.internalEventPromise(`res:${l}`);await this.message(A.RequestBatch,W({requestId:l,requests:o},e));const{results:f}=await y;return f}cleanup(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())}async createConnection(o){var e;const l=this.internalEventPromise("ConnectionOpened"),y=this.internalEventPromise(`op:${A.Hello}`);this.socket=new ie(o,this.protocol),this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),await l;const f=(e=this.socket)==null?void 0:e.protocol;if(!f)throw new U(-1,"Server sent no subprotocol");if(f!==this.protocol)throw new U(-1,"Server sent an invalid subprotocol");return y}async identify(o,e,l={}){let{authentication:y,rpcVersion:f}=o,w=Ve(o,We);const _=W({rpcVersion:f},l);y&&e&&(_.authentication=Ue(y.salt,y.challenge,e));const p=this.internalEventPromise(`op:${A.Identified}`);await this.message(A.Identify,_);const a=await p;return this._identified=!0,this.emit("Identified",a),W({rpcVersion:f},w,a)}async message(o,e){if(!this.socket)throw new Error("Not connected");if(!this.identified&&o!==1)throw new Error("Socket not identified");const l=await this.encodeMessage({op:o,d:e});this.socket.send(l)}async internalEventPromise(o){return new Promise(e=>{this.internalListeners.once(o,e)})}onOpen(o){V("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",o)}async onMessage(o){try{const{op:e,d:l}=await this.decodeMessage(o.data);if(V("socket.message: %d %j",e,l),e===void 0||l===void 0)return;switch(e){case A.Event:{const{eventType:y,eventData:f}=l;this.emit(y,f);return}case A.RequestResponse:case A.RequestBatchResponse:{const{requestId:y}=l;this.internalListeners.emit(`res:${y}`,l);return}default:this.internalListeners.emit(`op:${e}`,l)}}catch(e){V("error handling message: %o",e)}}onError(o){V("socket.error: %o",o);const e=new U(-1,o.message);this.emit("ConnectionError",e),this.internalListeners.emit("ConnectionError",e)}onClose(o){V("socket.close: %s (%d)",o.reason,o.code);const e=new U(o.code,o.reason);this.emit("ConnectionClosed",e),this.internalListeners.emit("ConnectionClosed",e),this.cleanup()}}q.requestCounter=1;typeof te<"u"&&Object.defineProperty(te,"__esModule",{value:!0});class Ge extends q{constructor(...o){super(...o),this.protocol="obswebsocket.json"}async encodeMessage(o){return JSON.stringify(o)}async decodeMessage(o){return JSON.parse(o)}}const N=n=>(Se("data-v-86d2de08"),n=n(),Be(),n),Je=N(()=>b("div",{style:{margin:"20px","margin-top":"10px"}},"ROUND",-1)),Ke={style:{margin:"20px","margin-top":"10px",color:"black"}},Ye=N(()=>b("div",{class:"side-panel-shutter",id:"side-left-shutter"},null,-1)),Ze=N(()=>b("div",{style:{margin:"20px","margin-top":"10px"}},"MUSIC",-1)),Qe={style:{margin:"20px","margin-top":"10px",color:"black"}},Xe=N(()=>b("div",{class:"side-panel-shutter",id:"side-right-shutter"},null,-1)),et={id:"container"},tt={id:"bar-bottom-info-left-edge"},nt={viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{right:"0"}},rt=N(()=>b("polygon",{points:"0,0 100,0 100,100",style:{fill:"black"}},null,-1)),st=[rt],ot={id:"bar-bottom-info-right-edge"},it={viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{left:"0"}},at=N(()=>b("polygon",{points:"0,0 100,0 0,100",style:{fill:"black"}},null,-1)),ct=[at],lt={id:"bar-left-edge"},ut={viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{right:"0"}},ft=N(()=>b("polygon",{points:"0,0 100,0 100,100",style:{fill:"white"}},null,-1)),dt=[ft],ht={id:"bar-right-edge"},vt={viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{left:"0"}},pt=N(()=>b("polygon",{points:"0,0 100,0 0,100",style:{fill:"white"}},null,-1)),gt=[pt],mt={id:"coders-nameplates-container"},yt={class:"coder-nameplate"},_t={class:"coder-nameplate"},Ct={class:"coder-nameplate"},de="ws://localhost:4455",G="ws://localhost:6969",wt="http://localhost:8080",bt="meubapelefoute",Ft=he({__name:"OverlayTop",async setup(n){let o,e;var l=!1;const y=I(""),f=I(!0),w=I(!0),_=I(!1),p=I(!1),a=I(!1),t=I(!1),r=I(""),u=I(""),d=I(""),m=I(""),h=I(""),c=I(""),C=I(""),s=I(""),i=I(0);var v={isRunning:!1,startTime:-1,startState:0},g;async function F(){const x=await fetch(`${wt}/current_round`).catch(R=>{console.error(`Can't retrieve current round infos : ${R}`)});x&&x.status==200&&(console.log("Config loaded!"),g=await x.json(),r.value=g.round.coders[0],u.value=g.round.coders[1],d.value=g.round.coders[2],h.value=g.roundName,c.value=g.round.djName,C.value=g.round.commentsName,s.value=g.hostName)}function k(){f.value=!f.value}function S(){w.value=!w.value}function B(){_.value=!_.value,p.value=!0}function M(x){if(x=="MAIN_COMPETITION")w.value=!0,f.value=!0,_.value=!1;else{w.value=!1,f.value=!1,_.value=!0;var R=/CODER(\d+)/.exec(x);if(R!=null){const re=Number(R[1])-1;m.value=g.round.coders[re],y.value=g.round.coders[re]}}}var P=null;function E(){if(v.isRunning){const x=v.startState-(Date.now()-v.startTime)/1e3;i.value=Math.max(x,0)}else i.value=v.startState}function K(){i.value<=10&&i.value>0?a.value=!0:a.value=!1}function Y(){!v.isRunning&&P!=null&&clearInterval(P),E(),K()}const D=new WebSocket(G);D.addEventListener("open",()=>{console.log(`Connected to server ${G}.`)}),D.addEventListener("error",x=>{console.error(`Error with the server Websocket connection ${G}`)}),D.addEventListener("close",x=>{console.error(`Websocket connection with server ${G} closed.`)}),D.addEventListener("message",x=>{const R=JSON.parse(x.data);switch(R.type){case"TimerSetEvent":console.log(R),R.payload.time!=null?v.startState=R.payload.time:v.startState=i.value,R.payload.isRunning==!0&&v.isRunning!=!0?(v.isRunning=!0,v.startTime=Date.now(),window.setInterval(Y,200)):v.isRunning=!1,E();break;case"ConfigEvent":R.payload.doUpdate&&F()}});const L=new Ge;if([o,e]=Z(()=>L.connect(de,bt).then(()=>{l=!0}).catch(()=>{console.error(`Can't connect to OBS websockets ${de}`)})),await o,e(),L.on("SceneTransitionStarted",async function(x){const R=await L.call("GetCurrentProgramScene");M(R.currentProgramSceneName)}),L.on("ConnectionError",()=>{l=!1}),L.on("ConnectionClosed",()=>{l=!1}),[o,e]=Z(()=>F()),await o,e(),l){const x=([o,e]=Z(()=>L.call("GetCurrentProgramScene")),o=await o,e(),o);M(x.sceneName)}return(x,R)=>(j(),$(ke,null,[b("div",{class:T(["side-panel",{make_grow_side_panel:f.value,make_shrink_side_panel:!f.value}]),id:"side-left-title"},[Je,b("div",{class:T(["side-panel-content",{make_grow_side_panel_content:f.value,make_shrink_side_panel_content:!f.value}]),id:"side-left-content"},[b("div",Ke,O(h.value.toUpperCase()),1)],2),Ye],2),b("div",{class:T(["side-panel",{make_grow_side_panel:f.value,make_shrink_side_panel:!f.value}]),id:"side-right-title"},[Ze,b("div",{class:T(["side-panel-content",{make_grow_side_panel_content:f.value,make_shrink_side_panel_content:!f.value}]),id:"side-right-content"},[b("div",Qe,O(c.value.toUpperCase()),1)],2),Xe],2),b("div",et,[b("div",{id:"bar-center",class:T({make_timer_small:!w.value,make_timer_big:w.value,invert:t.value})},[b("div",{id:"bar-bottom-info",class:T({make_appear_bottom_infostrip:_.value,make_disappear_bottom_infostrip:!_.value})},[b("div",tt,[(j(),$("svg",nt,[...st]))]),b("div",ot,[(j(),$("svg",it,[...ct]))]),ve(be,{name:"slide-right"},{default:pe(()=>[(j(),$("div",{id:"bar-bottom-info-text",key:x.bar-x.bottom-x.info-x.text-x.content},O(y.value),1))]),_:1})],2),b("div",lt,[(j(),$("svg",ut,[...dt]))]),b("div",ht,[(j(),$("svg",vt,[...gt]))]),b("div",{id:"timer-text",class:T({blink:a.value})},O(Math.floor(i.value/60).toString().padStart(2,"0"))+":"+O(Math.floor(i.value%60).toString().padStart(2,"0")),3)],2)]),b("div",mt,[b("div",yt,O(r.value),1),b("div",_t,O(u.value),1),b("div",Ct,O(d.value),1)]),Fe(b("input",{type:"text",id:"bar-bottom-info-debug","onUpdate:modelValue":R[0]||(R[0]=ne=>y.value=ne),style:{position:"absolute",bottom:"0px",left:"0%"}},null,512),[[xe,y.value]]),b("button",{type:"button",onClick:B,style:{position:"absolute",bottom:"0px",left:"20%"}}," Toggle bottom info: "+O(_.value),1),b("button",{type:"button",onClick:k,style:{position:"absolute",bottom:"0px",left:"40%"}}," Toggle edge: "+O(f.value),1),b("button",{type:"button",onClick:S,style:{position:"absolute",bottom:"0px",left:"60%"}}," Toggle timer: "+O(w.value),1)],64))}}),xt=ge(Ft,[["__scopeId","data-v-86d2de08"],["__file","/Users/diffty/_Projets/Streaming/2024_04_Revision2024/OVERLAY/src/components/OverlayTop.vue"]]),kt=he({__name:"RevisionOverlayApp",setup(n){return(o,e)=>(j(),Re(Ie,null,{default:pe(()=>[ve(xt)]),_:1}))}}),St=ge(kt,[["__file","/Users/diffty/_Projets/Streaming/2024_04_Revision2024/OVERLAY/src/RevisionOverlayApp.vue"]]);Ae(St).mount("#app")});export default Bt();
